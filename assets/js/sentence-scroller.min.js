window.requestDraw=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(b){window.setTimeout(b,1E3/60)}}();window.cancelDraw=function(){return window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout}();
window.hexToRgb=function(b){b=b.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(h,a,d,e){return a+a+d+d+e+e});return(b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(b))?{r:parseInt(b[1],16),g:parseInt(b[2],16),b:parseInt(b[3],16)}:null};window.getElapsedMs=function(b){return new Date-b};window.random=function(b,h){return b+Math.floor(Math.random()*(h-b))};window.randomIn=function(b){return random(b.min,b.max)};
window.randomRemove=function(b){return 0<b.length?b.splice(random(0,b.length),1)[0]:null};
window.sentenceScroller=function(b){function h(){var d=Math.min(a.width,a.height)*a.fontSizeVmin/100;d={sentence:randomRemove(a.sentences),speedVw:randomIn(a.speedVw),speedAlphaIn:randomIn(a.speedAlphaIn),alphaWait:randomIn(a.alphaWait),speedAlphaOut:randomIn(a.speedAlphaOut),x:random(d,.8*a.width),y:random(d,.9*a.height),a:0,fadeIn:!0,created:new Date,speedAlpha:function(){return this.fadeIn?this.speedAlphaIn:this.speedAlphaOut}};a.activeSentences.push(d)}var a=this;a.canvasId="#sentence-scroller";
a.backgroundColor="#000000";a.fontFamily="arial";a.fontSizeVmin=2;a.color="#FFFFFF";a.addSentenceEvery=100;a.speedVw={min:1,max:5};a.speedAlphaIn={min:25,max:50};a.alphaWait={min:2E3,max:4E3};a.speedAlphaOut={min:25,max:50};a.sentences=["Hello","World!","How","are","you?"];b&&Object.assign(a,b);a.activeSentences=[];a.canvas=document.getElementById(a.canvasId);a.width=a.canvas.width;a.height=a.canvas.height;a.ctx=a.canvas.getContext("2d");a.time={sinceLastUpdate:new Date,sinceAddSentence:new Date};
a.clearSentences=function(){for(;0<a.activeSentences.length;){var d=a.activeSentences.pop();a.sentences.push(d.sentence)}};a.draw=function(){var d=a.ctx;d.font=a.fontSizeVmin+"vmin "+a.fontFamily;d.fillStyle=a.backgroundColor;d.fillRect(0,0,a.canvas.width,a.canvas.height);for(var e=0;e<a.activeSentences.length;++e){var c=a.activeSentences[e],f=hexToRgb(a.color);d.fillStyle="rgba("+[f.r,f.g,f.b,c.a/255].join()+")";d.fillText(c.sentence,c.x,c.y)}d=getElapsedMs(a.time.sinceLastUpdate);a.time.sinceLastUpdate=
new Date;for(e=0;e<a.activeSentences.length;++e){c=a.activeSentences[e];var g=d;f=a.width*c.speedVw/100*g/1E3;g=255*c.speedAlpha()/100*g/1E3;c.x+=f;c.fadeIn?(c.a+=g,255<c.a&&(c.fadeIn=!1)):getElapsedMs(c.created)>c.alphaWait&&(c.a-=g);if(c.x>a.width||!c.fadeIn&&0>=c.a)f=a.activeSentences.indexOf(c),-1!==f&&(a.activeSentences.splice(f,1),a.sentences.push(c.sentence))}a.activeSentences.length<a.sentences.length&&getElapsedMs(a.time.sinceAddSentence)>a.addSentenceEvery&&(h(),a.time.sinceAddSentence=
new Date);requestDraw(a.draw)};a.cancelDraw=function(){cancelDraw(a.draw)};a.resize=function(){a.width=window.innerWidth;a.canvas.width=a.width;a.height=window.innerHeight;a.canvas.height=a.height;a.clearSentences()};window.addEventListener("resize",a.resize);a.resize();return a};